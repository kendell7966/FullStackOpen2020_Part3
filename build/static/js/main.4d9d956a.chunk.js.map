{"version":3,"sources":["services/persons.js","components/Person.js","components/Persons.js","components/PersonForm.js","components/PersonFilter.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Person","person","handleClickDelete","name","number","onClick","Persons","persons","filter","toLowerCase","includes","map","key","PersonForm","newName","handleNameChange","newNumber","handleNumberChange","addName","onSubmit","value","onChange","type","PersonFilter","handleFilterChange","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","setFilter","emptyNotificationObject","notificationObject","setNotificationObject","useEffect","personService","initialPersons","notify","setTimeout","displaySuccess","displayError","ensureIdRemoved","n","event","target","preventDefault","existingPerson","find","undefined","personObject","concat","catch","error","window","confirm","updatePerson","alreadyDeletedMessage","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4d9d956a.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React from 'react'\r\n\r\nconst Person = ({ person, handleClickDelete }) => {\r\n    return (\r\n        <li>\r\n            {person.name} {person.number} <button onClick={handleClickDelete}>delete</button>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = ({ persons, filter, handleClickDelete }) => {\r\n    return (\r\n        <ul>\r\n            {\r\n                persons\r\n                    .filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\r\n                    .map(person => <Person key={person.name} person={person} handleClickDelete={() => handleClickDelete(person.id)} />)\r\n            }\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = ({ newName, handleNameChange, newNumber, handleNumberChange, addName }) => {\r\n    return (\r\n        <form onSubmit={addName}>\r\n            <div>\r\n                name: <input value={newName} onChange={handleNameChange} />\r\n            </div>\r\n            <div>\r\n                number: <input value={newNumber} onChange={handleNumberChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst PersonFilter = ({ filter, handleFilterChange }) => {\r\n    return (\r\n        <p>\r\n            filter shown as <input value={filter} onChange={handleFilterChange} />\r\n        </p>\r\n    )\r\n}\r\n\r\nexport default PersonFilter","import React from 'react'\r\n\r\nconst Notification = ({ message, className }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={className}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport PersonFilter from './components/PersonFilter'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n\r\n    const [persons, setPersons] = useState([])\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [filter, setFilter] = useState('')\r\n\r\n    const emptyNotificationObject = { message: null, className: null }\r\n    const [notificationObject, setNotificationObject] = useState(emptyNotificationObject)\r\n\r\n    useEffect(() => {\r\n        personService\r\n            .getAll()\r\n            .then(initialPersons => {\r\n                setPersons(initialPersons)\r\n            })\r\n    }, [])\r\n\r\n    const notify = (message, className) => {\r\n\r\n        const notifyObject = { message, className }\r\n        setNotificationObject(notifyObject)\r\n\r\n        setTimeout(() => {\r\n            setNotificationObject(emptyNotificationObject)\r\n        }, 5000)\r\n    }\r\n\r\n    const displaySuccess = message => {\r\n        notify(message, \"notify\")\r\n    }\r\n\r\n    const displayError = message => {\r\n        notify(message, \"error\")\r\n    }\r\n\r\n    const updatePerson = (person) => {\r\n\r\n        const personObject = { ...person, number: newNumber }\r\n\r\n        personService\r\n            .update(personObject.id, personObject)\r\n            .then(personObject => {\r\n                displaySuccess(`Person '${personObject.name}' was updated`)\r\n                setPersons(persons.map(person => person.id !== personObject.id ? person : personObject))\r\n            })\r\n            .catch(error => {\r\n                displayError(`the person with id '${personObject.id}' was already deleted from the server`)\r\n                ensureIdRemoved(personObject.id)\r\n            })\r\n\r\n        setNewName('')\r\n        setNewNumber('')\r\n    }\r\n\r\n    const addName = (event) => {\r\n        event.preventDefault()\r\n\r\n        const existingPerson = persons.find(person => person.name === newName);\r\n        if (existingPerson !== undefined) {\r\n            let shouldUpdate = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\r\n            if (shouldUpdate) {\r\n                updatePerson(existingPerson)\r\n            }\r\n            return\r\n        }\r\n\r\n        const personObject = {\r\n            name: newName,\r\n            number: newNumber\r\n        }\r\n\r\n        personService\r\n            .create(personObject)\r\n            .then(personObject => {\r\n                displaySuccess(`Person '${personObject.name}' was added`)\r\n                setPersons(persons.concat(personObject))\r\n            })\r\n            .catch(error => {\r\n                displayError(error.response.data.error)\r\n            })\r\n\r\n        setNewName('')\r\n        setNewNumber('')\r\n    }\r\n\r\n    const handleNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n\r\n    const handleNumberChange = (event) => {\r\n        setNewNumber(event.target.value)\r\n    }\r\n\r\n    const handleFilterChange = (event) => {\r\n        setFilter(event.target.value)\r\n    }\r\n\r\n    const ensureIdRemoved = id => {\r\n        setPersons(persons.filter(n => n.id !== id))\r\n    }\r\n\r\n    const handleClickDelete = (id) => {\r\n        let person = persons.find(person => person.id === id)\r\n        let alreadyDeletedMessage = `the person with id '${id}' was already deleted from the server`\r\n\r\n        if (person === undefined) {\r\n            displayError(alreadyDeletedMessage)\r\n            ensureIdRemoved(id)\r\n            return\r\n        }\r\n\r\n        let confirmDelete = window.confirm(`Delete ${person.name}?`)\r\n        if (confirmDelete === false) {\r\n            return\r\n        }\r\n\r\n        personService\r\n            .remove(id)\r\n            .then(() => {\r\n                displaySuccess(`Person '${person.name}' was removed`)\r\n                ensureIdRemoved(id)\r\n            })\r\n            .catch(error => {\r\n                displayError(alreadyDeletedMessage)\r\n                ensureIdRemoved(id)\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification message={notificationObject.message} className={notificationObject.className} />\r\n            <PersonFilter filter={filter} handleFilterChange={handleFilterChange} />\r\n            <PersonForm newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} addName={addName} />\r\n            <h3>Numbers</h3>\r\n            <Persons persons={persons} filter={filter} handleClickDelete={handleClickDelete} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n    <App />,\r\n    document.getElementById('root')\r\n)"],"sourceRoot":""}